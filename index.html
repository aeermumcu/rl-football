<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RL Football Champions ‚öΩ</title>
    <meta name="description" content="Watch two cute robots learn to play football through reinforcement learning!">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- TensorFlow.js for DQN -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.15.0/dist/tf.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">ü§ñ</span>
                <h1>RL Football Champions</h1>
                <span class="logo-icon">‚öΩ</span>
            </div>
            <p class="tagline">Watch Blip & Bloop learn to play through reinforcement learning!</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Game Area -->
            <div class="game-area">
                <div class="game-container">
                    <canvas id="gameCanvas" width="800" height="500"></canvas>
                    <div class="score-overlay">
                        <div class="player-score blip-score">
                            <span class="player-name">üîµ Blip</span>
                            <span class="score" id="blipScore">0</span>
                        </div>
                        <div class="match-info">
                            <span class="episode-counter">Episode <span id="episodeCount">0</span></span>
                            <span class="timer" id="matchTimer">0:30</span>
                        </div>
                        <div class="player-score bloop-score">
                            <span class="score" id="bloopScore">0</span>
                            <span class="player-name">Bloop üî¥</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar Controls -->
            <aside class="sidebar">
                <!-- Mode Selection -->
                <div class="control-panel mode-panel">
                    <h3>üéÆ Game Mode</h3>
                    <div class="mode-buttons">
                        <button class="mode-btn active" data-mode="train" id="btnTrain">
                            <span class="icon">üß†</span>
                            <span>Train AI</span>
                        </button>
                        <button class="mode-btn" data-mode="watch" id="btnWatch">
                            <span class="icon">üëÄ</span>
                            <span>Watch</span>
                        </button>
                        <button class="mode-btn" data-mode="play" id="btnPlay">
                            <span class="icon">üéØ</span>
                            <span>Play vs AI</span>
                        </button>
                    </div>
                </div>

                <!-- Training Controls -->
                <div class="control-panel training-panel">
                    <h3>‚ö° Training Speed</h3>
                    <div class="speed-buttons">
                        <button class="speed-btn active" data-speed="1">1x</button>
                        <button class="speed-btn" data-speed="2">2x</button>
                        <button class="speed-btn" data-speed="5">5x</button>
                        <button class="speed-btn" data-speed="10">10x</button>
                        <button class="speed-btn" data-speed="50">50x</button>
                    </div>

                    <h3 style="margin-top: 1rem;">‚è±Ô∏è Match Length</h3>
                    <div class="speed-buttons">
                        <button class="match-btn" data-time="10">10s</button>
                        <button class="match-btn" data-time="30">30s</button>
                        <button class="match-btn active" data-time="60">1m</button>
                        <button class="match-btn" data-time="120">2m</button>
                        <button class="match-btn" data-time="300">5m</button>
                    </div>
                    <div class="training-actions">
                        <button class="action-btn start-btn" id="btnStart">
                            <span>‚ñ∂Ô∏è Start Training</span>
                        </button>
                        <button class="action-btn reset-btn" id="btnReset">
                            <span>üîÑ Reset</span>
                        </button>
                    </div>
                    <div class="training-actions" style="margin-top: 0.5rem;">
                        <button class="action-btn save-btn" id="btnSave">
                            <span>üíæ Save</span>
                        </button>
                        <button class="action-btn load-btn" id="btnLoad">
                            <span>üìÇ Load</span>
                        </button>
                        <input type="file" id="fileInput" accept=".json" style="display: none;">
                    </div>
                    <label class="autosave-toggle">
                        <input type="checkbox" id="autosaveCheckbox" checked>
                        <span>üíæ Autosave every 500 episodes</span>
                    </label>
                </div>

                <!-- Learning Stats -->
                <div class="control-panel stats-panel">
                    <h3>üìä Learning Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Blip Wins</span>
                            <span class="stat-value blip-color" id="blipWins">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Bloop Wins</span>
                            <span class="stat-value bloop-color" id="bloopWins">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Draws</span>
                            <span class="stat-value" id="draws">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Goals</span>
                            <span class="stat-value" id="totalGoals">0</span>
                        </div>
                    </div>
                </div>

                <!-- Win Rate Chart -->
                <div class="control-panel chart-panel">
                    <h3>üìà Win Rate (Last 50)</h3>
                    <canvas id="chartCanvas" width="280" height="120"></canvas>
                    <div class="chart-legend">
                        <span class="legend-item blip">üîµ Blip</span>
                        <span class="legend-item bloop">üî¥ Bloop</span>
                    </div>
                </div>

                <!-- AI Type Selection -->
                <div class="control-panel ai-type-panel">
                    <h3>üß† AI Type</h3>
                    <div class="ai-type-buttons">
                        <button class="ai-type-btn" data-type="qlearning" id="btnQLearning">
                            <span class="icon">üìä</span>
                            <span>Q-Learning</span>
                        </button>
                        <button class="ai-type-btn active" data-type="dqn" id="btnDQN">
                            <span class="icon">üß†</span>
                            <span>DQN</span>
                        </button>
                    </div>
                </div>

                <!-- AI Info -->
                <div class="control-panel ai-panel">
                    <h3>ü§ñ AI Status</h3>
                    <div class="ai-info">
                        <div class="ai-stat">
                            <span class="label">Memory Size:</span>
                            <span class="value" id="qTableSize">0</span>
                        </div>
                        <div class="ai-stat">
                            <span class="label">Exploration (Œµ):</span>
                            <span class="value" id="epsilon">1.00</span>
                        </div>
                        <div class="ai-stat">
                            <span class="label">AI Type:</span>
                            <span class="value" id="aiTypeLabel">DQN</span>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Built with ‚ù§Ô∏è using Q-Learning | Use Arrow Keys to play in Play Mode</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/player.js"></script>
    <script src="js/rl-agent.js"></script>
    <script src="js/dqn-agent.js"></script>
    <script src="js/game.js"></script>
    <script src="js/visualizer.js"></script>
    <script src="js/main.js"></script>
</body>

</html>